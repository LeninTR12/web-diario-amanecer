---
import NewsCard from "@/components/cards/newsCard.astro";
import HeaderSection from "./headerSection.astro";
import { articlesHandler } from "@/lib/handlers/articles";
import type { Article } from "@/lib/types";

interface Props{
  title:string,
  link_title: string
  link_url: string,
  count: number
}

const {title, link_title, link_url,count}:Props = Astro.props;

const allArticles :Article[] = await articlesHandler.allArticles();
const removeArticles:Article[] = allArticles.slice(0,6);
const scopeArticles:Article[] = await articlesHandler.articlesByScope(link_url.replace("/", ""));

const articles:Article[] =  scopeArticles.filter((article)=>(
  !removeArticles.some((removeArticle)=>
    removeArticle.id ===article.id)));

---

<section class="flex flex-col w-full px-4 xl:px-0 max-w-[1024px] m-auto gap-8 py-8" data-pagefind-ignore="all">
  <HeaderSection
    title={title}
    link_url={link_url}
  />
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 gap-y-8">
    {
      articles
        .slice(0, count)
        .map((article, index) => <NewsCard article={article} index={index} />)
    }
  </div>
</section>
