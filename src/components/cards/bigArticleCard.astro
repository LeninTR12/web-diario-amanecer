---
import type { Article, Category } from '@/lib/types';
import { Image } from 'astro:assets';
import { decode } from 'html-entities';
import imageNotFound from 'src/assets/images/404.webp';
import Divider from '../bases/divider.astro';
import { formatDateTime } from '@/lib/utils/date';


type Props = {
    article: Article;
    category: Category;


}

const {article, category} = Astro.props as Props;
---
<article class="group relative isolate flex flex-col md:flex-col gap-5 py-6">
    <div class="flex bg-cover rounded-md">
      <Image
        src={article._embedded["wp:featuredmedia"]?.[0]["source_url"] ||
          imageNotFound}
        alt={decode(String(article.title.rendered))}
        width={630}
        height={620}
        layout="responsive"
        loading={"eager"}
      />
    </div>
    <div class="flex flex-col gap-3">
      <div>
        <h2
          class="text-xl font-semibold lg:group-hover:underline underline-offset-2"
        >
          <a
            href={`/${category.slug}/${article.slug}`}
            title={decode(String(article.title.rendered))}
          >
            {decode(String(article.title.rendered))}
          </a>
        </h2>
        <span
          class="text-base max-w-lg text-[#FBC208]"
          set:html={article.excerpt.rendered}
        />
      </div>
      <div class="flex items-center text-xs text-base-content/80 mt-2">
        <span class="text-primary dark:text-secondary"
          >{category.name}</span
        >
        <Divider />
        <span>{formatDateTime(article.date)}</span>
      </div>
    </div>
  </article>