---
import type { Article, Category } from "@/lib/types";
import { Image } from "astro:assets";
import { decode } from "html-entities";
import imageNotFound from "src/assets/images/404.webp";
import { formatDateTime } from "@/lib/utils/date";

type Props = {
  article: Article;
  category: Category;
};

const { article, category } = Astro.props as Props;
---

<article class="group relative isolate flex flex-col md:flex-col gap-5 ">
  <div class="flex bg-cover rounded-md">
    <img
      src={article._embedded["wp:featuredmedia"]?.[0]["source_url"] || imageNotFound.src}
      alt={decode(String(article.title.rendered))}
      width={1024}
      height={612}
      loading={"eager"}
      class="rounded-sm"
    />
  </div>
  <div class="flex flex-col gap-3">
    <div class="flex flex-col gap-4">
      <h2
        class="text-[1.5rem] md:text-[2rem] font-serif font-semibold leading-7 md:leading-9 lg:group-hover:underline underline-offset-2 line-clamp-3"
      >
        <a
          href={`/${category.slug}/${article.slug}`}
          title={decode(String(article.title.rendered))}
        >
          {decode(String(article.title.rendered))}
        </a>
      </h2>
      <span
        class="text-base font-sans text-[#505050] line-clamp-3"
        set:html={article.excerpt.rendered}
      />
    </div>
    <div class="flex text-xs items-center gap-2">
      <span
        class="flex px-1.5 py-0.5 rounded-md font-semibold uppercase text-[#10477C] bg-[#FBC208]"
        >{category.name}</span
      >
      <span class="flex gap-1 text-[#10477C]">
        <span>{formatDateTime(article.date)}</span>
        |
        <span>Diario Amanecer</span>
      </span>
    </div>
  </div>
</article>
